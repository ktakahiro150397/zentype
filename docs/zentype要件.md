ZenType 要件定義書 - 完全版

# 1. プロジェクト概要
   「ZenType」は、タイピングスキル向上に特化した、究極にミニマルでモダンなWebアプリケーションです。ユーザーは余計な要素に気を取られることなくタイピング練習に没頭し、自身の成長を詳細なデータで把握し、モチベーションを維持できる環境を提供します。すべての操作がキーボードで完結する「キーボードフレンドリー」な設計を特徴とします。

# 2. 目的
   ユーザーがタイピングスキルを効率的かつ楽しく向上させる。
   モダンで洗練された、視覚的ノイズの少ないタイピング体験を提供する。
   キーボード操作のみでサイトの全機能を完結させ、高い生産性を実現する。
   詳細な成績記録と分析により、ユーザーの成長を可視化し、モチベーションを維持する。
   称号システムとランキング機能により、ユーザーの達成感と継続意欲を刺激する。

# 3. ターゲットユーザー
   タイピング初心者から上級者まで、全てのレベルのタイピングスキル向上を目指すユーザー。
   集中してタイピング練習に取り組みたいユーザー。
   データに基づいて自身の成長を分析したいユーザー。
   ミニマルで洗練されたUI/UXを好むユーザー。

# 4. 機能要件

## 4.1. ユーザー認証・管理
    - アカウント作成: メールアドレス/パスワード、またはソーシャルログイン（Google/GitHubなど）による新規アカウント作成。
    - ログイン/ログアウト: 登録済みアカウントでのログイン/ログアウト機能。
    - パスワード再設定: パスワード忘れ時の再設定機能。
    - プロフィール設定: ユーザー名、アバター（任意）、表示設定（キーボードの種類など、後述）の変更。

## 4.2. タイピング練習機能
    - モード選択:
        - 標準練習: ランダムに生成される短文や、厳選された名言・詩などの練習テキストを使用。
        - 長文練習: 小説の一節、ニュース記事、技術文書など、まとまった文章の練習テキストを使用。
        - 苦手ワード克服練習: ユーザーの過去の成績に基づき、苦手な単語やキーの組み合わせをAIが抽出し、それらを重点的に練習できるモード。
        - カスタム練習: ユーザーが任意のテキストを貼り付けて練習できるモード。
    - 練習中の表示:
        - 入力中のテキスト、完了済みテキスト、未入力テキストを視覚的に区別して表示。
        - リアルタイムでのWPM（Words Per Minute）、正打率、残り時間（または経過時間）の表示。
        - ミスタッチ箇所は即座にハイライト表示（例：赤字）し、視覚的にフィードバック。
        - 設定により、仮想キーボード（現在押すべきキーをハイライト表示）の表示/非表示を切り替え可能。
    - 練習結果の表示:
        - 練習終了後、WPM、正打率、ミスタイプ数、入力時間、BackSpace使用回数などの詳細な結果を表示。
        - ミスタッチした単語やキーのリストを表示し、復習を促す。
    - 練習テキストのカスタマイズ:
        - 文字数制限、難易度（易しい/普通/難しい）、使用文字種（英数字のみ/記号含む/かな入力対応など）の選択。
        - （将来的拡張）カテゴリ別（プログラミングコード、ニュース、小説など）の練習テキスト選択。

## 4.3. 成績記録・分析機能
    - ダッシュボード:
        - 総合的なタイピング成績（累計WPM、平均正打率、総タイピング文字数など）の概要表示。
        - 最新の練習結果サマリー。
        - 進捗グラフ（日次/週次/月次でのWPM、正打率の推移）。
    - 練習履歴:
        - 全練習セッションの詳細な履歴リスト。
        - 各セッションのWPM、正打率、ミスタイプ数、入力時間、使用テキストなどを確認可能。
        - セッションごとの詳細分析（フレーム単位の入力速度、特定のキーの遅延、ミスタッチ傾向など）表示。
    - 苦手分析:
        - 頻繁にミスタイプする単語やキーのリスト表示。
        - 特定のキーの入力速度や正確性の傾向をグラフで表示。
        - AIによる弱点分析レポートの生成。

## 4.4. モチベーション機能
    - 称号システム:
        - 特定の条件達成でユニークな称号（例：「無心のタイピスト」「閃光の指先」「鋼の正確性」など）を自動付与。
        - 称号獲得条件の例：
            - 累計入力文字数：10万文字、100万文字、500万文字など
            - 平均WPM：60WPM、80WPM、100WPMなど達成
            - 正打率：99%以上を100回達成
            - 特定の長文をノーミスでクリア
            - 連続ログイン日数：7日、30日、90日など
        - 獲得した称号はユーザーのプロフィールページに表示。
    - ランキング:
        - 全体ランキング: 総合WPM、平均WPM、最高WPM（特定のモード）などの指標に基づいた全ユーザーランキング。
        - フレンドランキング: ユーザー同士で友達申請・承認を介してフレンドになり、フレンド限定のランキングで競い合える機能。
        - ランキングはWPMだけでなく、「正確性ランキング」「ロングランランキング（長文タイピング）」など、多様な指標で楽しめます。

## 4.5. 設定
    - タイピング設定:
        - キーボード配列選択（QWERTY、Dvorak、かな入力など）。
        - 入力中の文字色、背景色、フォントサイズのカスタマイズ。
        - リアルタイムフィードバック（ミスタッチ表示）のON/OFF。
        - 仮想キーボードの表示/非表示。
    - サウンド設定: キー音、エラー音のON/OFF、音量調整。
    - 通知設定: 称号獲得通知、ランキング更新通知などのON/OFF。

# 5. 非機能要件

## 5.1. UI/UX (ユーザーインターフェース/ユーザーエクスペリエンス)
    - モダンでミニマルなデザイン: 余計な装飾を排し、コンテンツと機能に集中できるクリーンなデザイン。
    - キーボードフレンドリー: サイト内の全ての操作がショートカットキーで完結する。（マウス不要）
    - ショートカットキー一覧の表示（ヘルプまたは設定画面）。
    - 直感的な操作性: 初めてのユーザーでも迷わず利用できる分かりやすいナビゲーションとレイアウト。
    - 高速なレスポンス: タイピング中の入力遅延がないこと、画面遷移がスムーズであること。

## 5.2. パフォーマンス
    - 大量のユーザーデータや練習履歴が記録されても、表示・処理速度が低下しないこと。
    - リアルタイムでのWPM計算やフィードバックが滞りなく行われること。

## 5.3. スケーラビリティ
    - ユーザー数増加に対応できるシステムアーキテクチャ。
    - 将来的な機能追加に対応できる拡張性。

## 5.4. セキュリティ
    - ユーザー認証情報の安全な管理（パスワードのハッシュ化など）。
    - 一般的なWebセキュリティ対策（XSS, CSRF対策など）。

## 5.5. 信頼性
    - システムダウンタイムを最小限に抑える安定した稼働。
    - データ損失を防ぐための適切なバックアップ体制。

## 5.6. 互換性
    - 主要なWebブラウザ（Chrome, Firefox, Safari, Edge）の最新バージョンで正常に動作すること。
    - レスポンシブデザインにより、様々な画面サイズ（デスクトップ、タブレット）で適切に表示されること。（ただし、タイピングサイトの性質上、デスクトップ/ラップトップでの利用が主眼）

# 6. 技術スタック
   フロントエンド & バックエンド (API): Next.js (TypeScript)
   Next.jsのApp RouterまたはPages Routerを利用して、フロントエンドのレンダリングとAPIエンドポイントを提供。
   TypeScriptによる型安全な開発を徹底。
   データベース: PostgreSQL (RDB)
   選定理由:
   ユーザー情報、練習セッションの成績、称号、ランキングといった、データの整合性とリレーショナルな関係が重要なコアデータの管理に最適。
   複雑なクエリによる集計や分析が容易であり、ランキングや統計データの算出に強みを発揮。
   詳細なタイピング履歴データ（フレーム単位/キーイベントレベル）についても、PostgreSQLのJSONB型を効果的に活用することで柔軟に保持し、処理することが可能。
   成熟したエコシステムと豊富なツール群により、開発・運用コストを抑えやすい。
   クラウドサービス（AWS RDS, GCP Cloud SQL, Supabase, Neonなど）を利用することで、高いスケーラビリティと運用負荷の軽減が期待できる。
   バージョン管理: GitHub
   リポジトリ管理、Issuesによるタスク管理、Pull Requestによるコードレビューフロー。
   GitHub Actions を利用したCI/CD (継続的インテグレーション/継続的デリバリー) パイプラインの構築。
   ホスティング環境: Vercel (Next.jsとの親和性が高いため推奨) または AWS/GCP/Azureなどのクラウドプラットフォーム。

# 7. 開発フェーズ（提案）
   MVP (Minimum Viable Product) 開発:
   アカウント作成/ログイン
   標準練習モード
   基本的な成績記録（WPM, 正打率, ミスタイプ数）
   キーボードフレンドリーな基本操作
   機能拡張フェーズ1:
   長文練習モード
   詳細な成績分析（苦手ワード、グラフ表示）
   プロフィール設定
   機能拡張フェーズ2:
   称号システム
   ランキングシステム（全体ランキング）
   苦手ワード克服練習
   継続的改善:
   カスタム練習モード
   フレンドランキング
   多言語対応（必要であれば）
   パフォーマンス改善、バグ修正
